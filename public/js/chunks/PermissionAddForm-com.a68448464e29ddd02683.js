(self.webpackChunk=self.webpackChunk||[]).push([[3395],{86339:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>n});function a(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,r,s;return t=e,(r=[{key:"get",value:function(e){if(this.errors[e])return this.errors[e][0]}},{key:"record",value:function(e){this.errors=e.errors}}])&&a(t.prototype,r),s&&a(t,s),e}();const i={name:"PermissionAddMaster",data:function(){return{editMode:!1,roles:[],errors:new o,allSelected:!1,view:[],formData:{id:"",role_id:""},resources:{BranchInfo:{module:"BranchInfo",view:!1,read:!1,write:!1,update:!1,delete:!1,name:"BranchInfo"},permission:{module:"permission",view:!1,read:!1,write:!1,update:!1,delete:!1,name:"permission"},role:{module:"role",view:!1,read:!1,write:!1,update:!1,delete:!1,name:"role"},user:{module:"user",view:!1,read:!1,write:!1,update:!1,delete:!1,name:"user"}},defaultResources:{BranchInfo:{module:"BranchInfo",view:!1,read:!1,write:!1,update:!1,delete:!1,name:"BranchInfo"},permission:{module:"permission",view:!1,read:!1,write:!1,update:!1,delete:!1,name:"permission"},role:{module:"role",view:!1,read:!1,write:!1,update:!1,delete:!1,name:"role"},user:{module:"user",view:!1,read:!1,write:!1,update:!1,delete:!1,name:"user"}}}},computed:{},methods:{fetchRole:function(){var e=this;this.$Progress.start(),axios.get("/spa/Roles-Info").then((function(t){e.roles=t.data,e.$Progress.finish()})).catch((function(t){e.$Progress.fail(),toastr.warning("Something is wrong!")}))},changeRole:function(e){var t=this,r=e.target.value;axios.get("/spa/Permissions-Info/"+r).then((function(e){var r=e.data;r?(t.editMode=!0,t.resources=JSON.parse(r.permission),t.formData.id=r.id):(t.editMode=!1,t.resources=t.defaultResources)})).catch((function(e){}))},assignPermission:function(){var e=this;this.$Progress.start();var r=this.resources;this.$Progress.start(),axios.post("/spa/Permissions-Info",{permission:r,role_id:this.formData.role_id}).then((function(r){var s=r.data;s.success&&(FireEvent.$emit("AfterChange"),toastr.success(s.success),e.resources=e.defaultResources,e.formData.role_id="",e.errors.errors={},t,e.$Progress.finish()),s.errors&&toastr.warning(s.errors)})).catch((function(t){e.$Progress.fail(),t.response&&e.errors.record(t.response.data)}))},updatePermission:function(){var e=this;this.$Progress.start();var t=this.resources;this.$Progress.start(),axios.put("/spa/Permissions-Info/"+this.formData.id,{permission:t,role_id:this.formData.role_id}).then((function(t){var r=t.data;r.success&&(FireEvent.$emit("AfterChange"),toastr.success(r.success),e.resources=e.defaultResources,e.formData.id="",e.formData.role_id="",e.errors.errors={},e.$Progress.finish(),e.editMode=!1),r.errors&&toastr.warning(r.errors)})).catch((function(t){e.$Progress.fail(),t.response&&e.errors.record(t.response.data)}))}},created:function(){var e=this;this.fetchRole(),FireEvent.$on("AfterChange",(function(){e.fetchRole()}))}};const n=(0,s(51900).Z)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4 col-sm-12"},[r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-3",attrs:{for:"role_id"}},[e._v("Role *")]),e._v(" "),r("div",{staticClass:"col-9"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.role_id,expression:"formData.role_id"}],staticClass:"form-control form-control-sm",attrs:{id:"role_id",name:"role_id"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.formData,"role_id",t.target.multiple?r:r[0])},function(t){return e.changeRole(t)}]}},[r("option",{attrs:{disabled:"",value:""}},[e._v("Select Role ..")]),e._v(" "),e._l(e.roles,(function(t){return r("option",{domProps:{value:t.id}},[e._v("\r\n              \t"+e._s(t.name)+"\r\n              ")])}))],2),e._v(" "),r("span",{staticClass:"text-danger"},[e._v(e._s(e.errors.get("role_id")))])])])]),e._v(" "),r("div",{staticClass:"col-md-8 col-sm-12"},[r("table",{staticClass:"table table-striped table-sm table-responsive-"},[e._m(0),e._v(" "),r("tbody",e._l(e.resources,(function(t,s){return r("tr",{key:s},[r("td",[e._v(e._s(s))]),e._v(" "),r("td",[e._v(e._s(t.module))]),e._v(" "),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.view,expression:"r.view"}],staticClass:"mycheckbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.view)?e._i(t.view,null)>-1:t.view},on:{change:function(r){var s=t.view,a=r.target,o=!!a.checked;if(Array.isArray(s)){var i=e._i(s,null);a.checked?i<0&&e.$set(t,"view",s.concat([null])):i>-1&&e.$set(t,"view",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(t,"view",o)}}})]),e._v(" "),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.read,expression:"r.read"}],staticClass:"mycheckbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.read)?e._i(t.read,null)>-1:t.read},on:{change:function(r){var s=t.read,a=r.target,o=!!a.checked;if(Array.isArray(s)){var i=e._i(s,null);a.checked?i<0&&e.$set(t,"read",s.concat([null])):i>-1&&e.$set(t,"read",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(t,"read",o)}}})]),e._v(" "),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.write,expression:"r.write"}],staticClass:"mycheckbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.write)?e._i(t.write,null)>-1:t.write},on:{change:function(r){var s=t.write,a=r.target,o=!!a.checked;if(Array.isArray(s)){var i=e._i(s,null);a.checked?i<0&&e.$set(t,"write",s.concat([null])):i>-1&&e.$set(t,"write",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(t,"write",o)}}})]),e._v(" "),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.update,expression:"r.update"}],staticClass:"mycheckbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.update)?e._i(t.update,null)>-1:t.update},on:{change:function(r){var s=t.update,a=r.target,o=!!a.checked;if(Array.isArray(s)){var i=e._i(s,null);a.checked?i<0&&e.$set(t,"update",s.concat([null])):i>-1&&e.$set(t,"update",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(t,"update",o)}}})]),e._v(" "),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.delete,expression:"r.delete"}],staticClass:"mycheckbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.delete)?e._i(t.delete,null)>-1:t.delete},on:{change:function(r){var s=t.delete,a=r.target,o=!!a.checked;if(Array.isArray(s)){var i=e._i(s,null);a.checked?i<0&&e.$set(t,"delete",s.concat([null])):i>-1&&e.$set(t,"delete",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(t,"delete",o)}}})])])})),0)])])]),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 align-center form-group"},[!1===e.editMode?r("button",{attrs:{type:"btn btn-danger btn-flat btn-sm"},on:{click:function(t){return t.preventDefault(),e.assignPermission(t)}}},[e._v("\r\n  \t\t\tSave Permission\r\n  \t\t")]):e._e(),e._v(" "),!0===e.editMode?r("button",{attrs:{type:"btn btn-danger btn-flat btn-sm"},on:{click:function(t){return t.preventDefault(),e.updatePermission(t)}}},[e._v("\r\n  \t\t\tUpdate Permission\r\n  \t\t")]):e._e()])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{staticStyle:{width:"30%"},attrs:{scope:"col"}},[e._v("Module")]),e._v(" "),r("th",{staticStyle:{width:"30%"},attrs:{scope:"col"}},[e._v("name")]),e._v(" "),r("th",{staticStyle:{width:"5%"},attrs:{scope:"col"}},[e._v("View")]),e._v(" "),r("th",{staticStyle:{width:"5%"},attrs:{scope:"col"}},[e._v("Read")]),e._v(" "),r("th",{staticStyle:{width:"5%"},attrs:{scope:"col"}},[e._v("Write")]),e._v(" "),r("th",{staticStyle:{width:"5%"},attrs:{scope:"col"}},[e._v("Update")]),e._v(" "),r("th",{staticStyle:{width:"5%"},attrs:{scope:"col"}},[e._v("Delete")])])])}],!1,null,null,null).exports}}]);