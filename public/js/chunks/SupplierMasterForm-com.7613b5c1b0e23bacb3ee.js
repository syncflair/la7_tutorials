(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{316:function(e,t,r){"use strict";r.r(t);var a=r(1);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={name:"SupplierMasterForm",data:function(){return{NoIconUrl:"FilesStorage/CommonFiles/no-img.png",ShowOnChangeImage:null,deleteImageIcon:!1,editMode:!1,placeHolder:"Select Vendor",filterBy:"vendor_name",valueProperty:"id",form:new Form({id:"",name:"",email:"",phone:"",password:"",password_confirmation:"",status_id:"",vendor_id:"",is_allow_to_modify:"",supplier_desc:"",supplier_address:"",avatar:""})}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(a.b)("SupplierForAdminStore",["pagination","selectedVendor","autoSearchVendor"]),{},Object(a.b)("commonStoreForAll",["userStatus"])),methods:{onImageChange:function(e){var t=this,r=e.target.files[0];this.ShowOnChangeImage=URL.createObjectURL(r);var a=new FileReader;r.size>512e3?toastr.warning("Please select file size within 500kb"):(a.onloadend=function(e){t.form.avatar=a.result},a.readAsDataURL(r))},addSupplier:function(){var e=this;this.editMode=!1,this.form.reset(),setTimeout((function(){e.$refs.name.focus()}),200)},editSupplier:function(e){var t=this;this.editMode=!0,this.form.reset(),this.form.fill(e),setTimeout((function(){t.$refs.name.focus()}),200),null!=e.avatar&&(this.deleteImageIcon=!0),this.$store.dispatch("SupplierForAdminStore/fetchSelectedVendor",this.form.vendor_id)},ClearForm:function(){this.editMode=!1,this.form.reset(),this.form.clear(),this.$refs.avatar.value="",this.ShowOnChangeImage=null},storeFormData:function(){var e=this;this.$Progress.start(),this.form.post("/spa/supplier-Info").then((function(t){var r=t.data;r.success&&(FireEvent.$emit("AfterChange"),toastr.success(r.success),e.$Progress.finish(),e.form.reset(),e.$refs.avatar.value="",e.ShowOnChangeImage=null,$("#FormModal").modal("hide")),r.errors&&toastr.warning(r.errors)})).catch((function(){e.$Progress.fail(),toastr.warning("Something is wrong!")}))},updateFormData:function(){var e=this;this.$Progress.start(),this.form.put("/spa/supplier-Info/"+this.form.id).then((function(t){var r=t.data;r.success&&(FireEvent.$emit("AfterChange"),e.$Progress.finish(),toastr.success(r.success),e.form.reset(),e.editMode=!1,e.$refs.avatar.value="",e.ShowOnChangeImage=null,$("#FormModal").modal("hide")),r.errors&&toastr.warning(r.errors)})).catch((function(){e.$Progress.fail(),toastr.warning("Something is wrong!")}))},deleteImage:function(e){var t=this;this.$Progress.start(),axios.post("/spa/Supplier-Info-DeleteImage/"+e).then((function(e){var r=e.data;t.deleteImageIcon=!1,t.form.avatar=null,t.$Progress.finish(),toastr.success(r.success)})).catch((function(){t.$Progress.fail(),toastr.warning("Something is wrong!")}))},AutoCompleteSearchForDataVendor:function(e){this.$store.dispatch("SupplierForAdminStore/AutoCompleteSearchForDataVendor",e)},getSelectedDataByIdsForVendor:function(e){this.$store.dispatch("SupplierForAdminStore/fetchSelectedVendor",this.form.vendor_id)}},created:function(){var e=this;this.$store.dispatch("commonStoreForAll/userStatus"),FireEvent.$on("AfterChange",(function(){e.$Progress.start(),e.$store.dispatch("SupplierForAdminStore/fetchData",e.pagination.per_page),e.$Progress.finish()})),FireEvent.$on("editSupplier",(function(t){e.editSupplier(t)})),FireEvent.$on("addSupplier",(function(){e.addSupplier()}))}},n=r(0),l=Object(n.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("div",{staticClass:"modal fade",attrs:{id:"FormModal",tabindex:"-1",role:"dialog","aria-labelledby":"","aria-hidden":"true","data-backdrop":"static"}},[r("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header pb-1"},[r("h5",{staticClass:"modal-title",attrs:{id:""}},[r("span",{directives:[{name:"show",rawName:"v-show",value:!e.editMode,expression:"!editMode"}]},[e._v("Add supplier (Credential)")]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}]},[e._v("Update - "+e._s(e.form.name))])]),e._v(" "),r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(t){return e.ClearForm()}}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])]),e._v(" "),r("form",{on:{submit:function(t){t.preventDefault(),e.editMode?e.updateFormData():e.storeFormData()}}},[r("div",{staticClass:"modal-body pt-1"},[r("div",{staticClass:"card--"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-5 col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[e._v("Name *")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],ref:"name",staticClass:"form-control form-control-sm-",class:{"is-invalid":e.form.errors.has("name")},attrs:{type:"text",name:"name",placeholder:"supplier Name"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),e._v(" "),r("has-error",{attrs:{form:e.form,field:"name"}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"email"}},[e._v("Email *")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],ref:"email",staticClass:"form-control form-control-sm-",class:{"is-invalid":e.form.errors.has("email")},attrs:{type:"text",name:"email",placeholder:"supplier email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e._v(" "),r("has-error",{attrs:{form:e.form,field:"email"}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"phone"}},[e._v("Phone *")]),e._v(" "),r("div",{staticClass:"input-group input-group-sm- mb-3"},[e._m(0),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.phone,expression:"form.phone"}],ref:"phone",staticClass:"form-control form-control-sm-",class:{"is-invalid":e.form.errors.has("phone")},attrs:{type:"number",name:"phone",placeholder:"Enter phone number"},domProps:{value:e.form.phone},on:{input:function(t){t.target.composing||e.$set(e.form,"phone",t.target.value)}}}),e._v(" "),r("has-error",{attrs:{form:e.form,field:"phone"}})],1)]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"user_status"}},[e._v("User Status *")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.form.status_id,expression:"form.status_id"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("status_id")},attrs:{id:"status_id",name:"status_id"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"status_id",t.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",value:""}},[e._v("Select user Status ..")]),e._v(" "),e._l(e.userStatus,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.us_name))])}))],2),e._v(" "),r("has-error",{attrs:{form:e.form,field:"status_id"}})],1),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"password"}},[e._v("Password  "),r("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.editMode,expression:"editMode === false"}]},[e._v(" * ")])]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],ref:"password",staticClass:"form-control form-control-sm-",class:{"is-invalid":e.form.errors.has("password")},attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),e._v(" "),r("has-error",{attrs:{form:e.form,field:"password"}})],1)]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"password_confirmation"}},[e._v("Password Confirm")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password_confirmation,expression:"form.password_confirmation"}],ref:"password_confirmation",staticClass:"form-control form-control-sm-",class:{"is-invalid":e.form.errors.has("password_confirmation")},attrs:{type:"password",name:"password_confirmation",placeholder:"Confirm Password"},domProps:{value:e.form.password_confirmation},on:{input:function(t){t.target.composing||e.$set(e.form,"password_confirmation",t.target.value)}}}),e._v(" "),r("has-error",{attrs:{form:e.form,field:"password_confirmation"}})],1)])]),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.is_allow_to_modify,expression:"form.is_allow_to_modify"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"is_enabled",id:"checkbox",value:"1"},domProps:{checked:Array.isArray(e.form.is_allow_to_modify)?e._i(e.form.is_allow_to_modify,"1")>-1:e.form.is_allow_to_modify},on:{change:function(t){var r=e.form.is_allow_to_modify,a=t.target,s=!!a.checked;if(Array.isArray(r)){var o=e._i(r,"1");a.checked?o<0&&e.$set(e.form,"is_allow_to_modify",r.concat(["1"])):o>-1&&e.$set(e.form,"is_allow_to_modify",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.form,"is_allow_to_modify",s)}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"checkbox"}},[e._v("Is this user permited to modify products")])])])])]),e._v(" "),r("div",{staticClass:"col-md-5 col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"vendor_id"}},[e._v("Select Vendor *")]),e._v(" "),r("single-select-app-one",{class:{"is-invalid":e.form.errors.has("vendor_id")},staticStyle:{"margin-top":"10px !important"},attrs:{options:e.selectedVendor,autoSearchOptions:e.autoSearchVendor,filterBy:e.filterBy,"place-holder":e.placeHolder,"value-property":e.valueProperty},on:{getAllDataListByIds:e.getSelectedDataByIdsForVendor,AutoCompleteSearchForData:e.AutoCompleteSearchForDataVendor},model:{value:e.form.vendor_id,callback:function(t){e.$set(e.form,"vendor_id",t)},expression:"form.vendor_id"}}),e._v(" "),r("has-error",{attrs:{form:e.form,field:"vendor_id"}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"supplier_address"}},[e._v("Address")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.supplier_address,expression:"form.supplier_address"}],staticClass:"form-control",attrs:{name:"supplier_address",placeholder:"Address"},domProps:{value:e.form.supplier_address},on:{input:function(t){t.target.composing||e.$set(e.form,"supplier_address",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"supplier_desc"}},[e._v("Details")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.supplier_desc,expression:"form.supplier_desc"}],staticClass:"form-control",attrs:{name:"supplier_desc",placeholder:"Supplier details"},domProps:{value:e.form.supplier_desc},on:{input:function(t){t.target.composing||e.$set(e.form,"supplier_desc",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-2 col-sm-6"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12 text-center"},[null!=e.ShowOnChangeImage?r("span",[null!=e.ShowOnChangeImage?r("img",{staticClass:"img-fluid img-thumbnail",staticStyle:{width:"150px",height:"auto"},attrs:{src:e.ShowOnChangeImage}}):e._e()]):r("span",["undefined"==e.form.avatar?r("img",{staticClass:"img-fluid img-thumbnail",staticStyle:{width:"150px",height:"150px"},attrs:{src:"../"+e.NoIconUrl}}):e._e(),e._v(" "),""===e.form.avatar||null===e.form.avatar?r("img",{staticClass:"img-fluid img-thumbnail",staticStyle:{width:"150px",height:"150px"},attrs:{src:"../"+e.NoIconUrl}}):""!=e.form.avatar?r("img",{staticClass:"img-fluid img-thumbnail focusImgOnHover",staticStyle:{width:"150px",height:"150px"},attrs:{src:e.form.avatar}}):e._e(),e._v(" "),e.deleteImageIcon?r("i",{staticClass:"far fa-times-circle",staticStyle:{cursor:"pointer",background:"#fff",padding:"4px 2px 2px 2px",color:"red","border-radius":"10px","margin-left":"-15px"},attrs:{title:"click to Delete"},on:{click:function(t){return e.deleteImage(e.form.id)}}}):e._e()])])]),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"avatar"}},[e._v("Picture")]),e._v(" "),r("input",{ref:"avatar",staticClass:"form-control",attrs:{type:"file",name:"avatar"},on:{change:e.onImageChange}})])])])])])])]),e._v(" "),r("div",{staticClass:"modal-footer pt-0"},[r("button",{staticClass:"btn btn-danger btn-flat btn-sm close-form",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.ClearForm()}}},[e._v("Close")]),e._v(" "),r("button",{staticClass:"btn btn-primary btn-flat btn-sm",attrs:{type:"submit"}},[r("span",{directives:[{name:"show",rawName:"v-show",value:!e.editMode,expression:"!editMode"}]},[r("i",{staticClass:"fas fa-save"}),e._v(" Save")]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}]},[r("i",{staticClass:"far fa-edit"}),e._v(" Update")])])])])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v(" +88 ")])])}],!1,null,null,null);t.default=l.exports}}]);